# 麻将得分计算器 (Mahjong Score Calculator)

这是一个简单的 PWA (Progressive Web App) 应用，用于帮助麻将玩家实时计算每局得分，并管理历史对局记录。

## 功能特性

*   **角色管理**：支持 4 名玩家，可动态选择本局赢家。
*   **实时计分**：
    *   输家输入输掉的分数，自动计算赢家总得分。
    *   实时更新所有玩家的当前得分（绿色为正分，红色为负分）。
*   **精数计算**：支持“精数”规则，每有 1 个精数，玩家从其他三家各赢取 1 分（即自己 +3，其他人各 -1）。
*   **历史对局管理**：
    *   “保存并下一局”将当前局得分写入历史 JSON（localStorage 持久化）。
    *   每位玩家展示“累计得分”（历史总和，不含当前局）。
    *   “删除最后一局”可移除最近一条历史；“清除历史对局”可一键清空。
    *   “查看历史记录”可展开/收起，彩色高亮 JSON 展示历史数组（含索引、时间戳、四人得分）。
*   **PWA 支持**：
    *   支持离线使用。
    *   可安装到手机或桌面作为独立应用运行。
*   **响应式设计**：适配移动端和桌面端显示。

## 使用说明

1.  打开应用。
2.  点击玩家卡片右上角的“赢家”单选框，指定本局赢家。
3.  在输家的“输分”框中输入输掉的分数（赢家无需输入输分）。
4.  如果有“精数”，在对应玩家的“精数”框中输入数量。
5.  系统会自动计算并显示本局得分；每位玩家的“累计得分”显示所有历史局的总分（不含当前局）。
6.  点击“保存并下一局”将本局结果加入历史，输入框自动清空以便下一局。
7.  如需撤销最近一局，点击“删除最后一局”；需要清空所有历史时，点击“清除历史对局”。
8.  点击“查看历史记录”展开或收起彩色高亮的 JSON 历史列表；首次加载时历史会从 localStorage 自动恢复。
9.  点击“重置本局”可仅清空当前输入而不影响历史。

## 安装方法 (PWA)

本应用支持 PWA 标准，可以像原生应用一样安装到设备上：

*   **iOS (Safari)**: 点击底部“分享”按钮 -> 选择 "添加到主屏幕"。
*   **Android (Chrome)**: 点击右上角菜单 -> 选择 "安装应用" 或 "添加到主屏幕"。
*   **桌面 (Chrome/Edge)**: 点击地址栏右侧的安装图标（通常是一个带加号的显示器图标）。

## 项目结构

*   `index.html`: 主页面结构
*   `style.css`: 样式表，包含响应式布局和主题颜色
*   `app.js`: 核心逻辑脚本，处理计分和交互
*   `sw.js`: Service Worker，处理离线缓存
*   `manifest.json`: PWA 配置文件
*   `icon.svg`: 应用图标

## 技术栈

*   HTML5
*   CSS3 (Grid/Flexbox, CSS Variables)
*   JavaScript (ES6+)
*   PWA (Service Worker, Web App Manifest)
